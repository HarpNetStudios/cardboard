///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
nodebug [
	defvar OPT_Width  1 66 0 // in units of (fontscale Width )
	defvar OPT_Height 1 21 0 // in units of (fontscale Height)
]

newgui "options" [
	guikeeptab 1
	// Save the frames 'guitabnum' hack:        H                                V
					  if (= $guitabnum  1) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Game   ]] ]
	guitab "console"; if (= $guitabnum  2) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Console]] ]
	guitab "display"; if (= $guitabnum  3) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Display]] ]
	guitab "gfx"    ; if (= $guitabnum  4) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Gfx    ]] ]
	guitab "hud"    ; if (= $guitabnum  5) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Hud    ]] ]
	guitab "input"  ; if (= $guitabnum  6) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Input  ]] ]
	guitab "menus"  ; if (= $guitabnum  7) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Menus  ]] ]
	guitab "res"    ; if (= $guitabnum  8) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Res    ]] ]
	guitab "sound"  ; if (= $guitabnum  9) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Sound  ]] ]
	guitab "ext"    ; if (= $guitabnum 10) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Ext    ]] ]
	guitab "cfg"    ; if (= $guitabnum 11) [ guilist [guistrut $OPT_Height 1; guilist [guistrut $OPT_Width 1; OPT_TAB_Cfg    ]] ]
] "game"


//#############################################################################################################################################
//#############################################################################################################################################
OPT_TAB_Game = [
	guifreerow 18  1 [ guitext "hit indication: "
			 ] 15 -2 [ guicheckbox "hit crosshair"  hitcrosshair 425 0
			 ] 15 -2 [ guicheckbox "hit sound"      hitsound
			 ]  1 -2 [ guicheckbox "kill sound"     killsound
	]
	guistrut 0.75
	guifreerow 18  1 [ guitext "respawn: "
			 ] 12 -2 [ guicheckbox "via ^f2attack"  attackspawn
			 ] 12 -2 [ guicheckbox "via ^f2jump"    jumpspawn
			 ]  1 -2 [ if (&& (= $attackspawn 0) (= $jumpspawn 0)) [guitext (? (mod (div $getmillis 500) 2) "^f4use ^f6/bind KEY [respawn]" "^f~use ^f2/bind KEY [respawn]")]
	]
	guistrut 0.75
	guifreerow 18  1 [ guitext "scoreboard: "
			 ]  1 -2 [ guicheckbox "show upon death"  deathscore
	]
	guifreerow 18 -2 [
			 ] 12 -2 [ guitext "tie sort: "
			 ]  9 -2 [ guiradio "0?"  tiesort 0
			 ]  9 -2 [ guiradio "1?"  tiesort 1 // Self   always first?  Regarless of tie?        Tie with teammate or enemy/enemy-team?
			 ]  1 -2 [ guiradio "2?"  tiesort 2 // Others always first?  Regarless of tie?
	]
	guifreerow 18  1 [ guitext "show/hide: "
			 ] 15 -2 [ guicheckbox "server info"     showservinfo
			 ] 15 -2 [ guicheckbox "connecting"      showconnecting
			 ]  1 -2 [ guicheckbox "highlight self"  highlightscore
	]
	guifreerow 18 -2 [
			 ] 15 -2 [ guicheckbox "frags"      hidefrags 0 1
			 ] 15 -2 [ guicheckbox "deaths"     showdeaths
			 ]  1 -2 [ guicheckbox "client #"   showclientnum
	]
	guifreerow 18 -2 [
			 ] 12 -2 [ guitext "ping: "
			 ]  9 -2 [ guiradio "off"                showping 0
			 ]  9 -2 [ guiradio "ping"               showping 1
			 ]  1 -2 [ guiradio "ping & packetjump"  showping 2
	]
	guifreerow 18 -2 [
			 ]  1 -2 [ guicheckbox "packetjump"  showpj
	]
	guifreerow 18 -2 [
			 ] 15 -2 [ guicheckbox "spectators" showspectators
			 ]  1 -2 [ guicheckbox "spectator ping" showspectatorping
	]
	guistrut 0.75
	guifreerow 18  1 [ guitext "player models: "
			 ] 12 -1 [ guicheckbox "fullbright" fullbrightmodels 60 0
			 ]  9 -1 [ if (!= $fullbrightmodels 0) [ guiradio "^f5subtle"   fullbrightmodels  60 ][ guiradio "^f4subtle"   fullbrightmodels  60 ]
			 ]  9 -1 [ if (!= $fullbrightmodels 0) [ guiradio "^f1bright"   fullbrightmodels 100 ][ guiradio "^f4bright"   fullbrightmodels 100 ]
			 ]  9 -1 [ if (!= $fullbrightmodels 0) [ guiradio "^f8intense"  fullbrightmodels 150 ][ guiradio "^f4intense"  fullbrightmodels 150 ]
			 ]  1 -1 [ if (!= $fullbrightmodels 0) [ guiradio "^f7max"      fullbrightmodels 200 ][ guiradio "^f4max"      fullbrightmodels 200 ]
	]
	guifreerow 18 -2 [
			 ] 27 -2 [ guicheckbox "force matching player models" forceplayermodels
			 ]  1 -2 [ guicheckbox "always use team skins" teamskins
	]
	guistrut 0.75
	guifreerow 18  1 [ guitext "violence: "
			 ]  1 -2 [ guicheckbox "blood"  blood
	]
	guifreerow 18 -2 [
			 ] 12 -2 [ guitext "hide dead:"
			 ]  9 -2 [ guiradio "off"          hidedead 0
			 ]  9 -2 [ guiradio "all"          hidedead 1
			 ]  1 -2 [ guiradio "enemies only" hidedead 2
	]
	guifreerow 18 -2 [
			 ] 18 -2 [ if (= $hidedead 1) [ guicheckbox "^f4ragdoll deaths" ragdoll ][ guicheckbox "ragdoll deaths" ragdoll ]
			 ]  1 -2 [ if (|| (= $hidedead 1) (= $ragdoll 0)) [ guicheckbox "^f4keep after respawn" ragdollmillis 10000 0 ][ guicheckbox "keep after respawn" ragdollmillis 10000 0 ]
	]
	guifreerow 18 -2 [
			 ] 18 -2 [ if (|| (= $hidedead 1) (= $ragdoll 0)) [guitext "^f4velocity multiplier:"][guitext "velocity multiplier:"]
			 ] 30 -2 [ guislider deadpush
	]
	guibar
	guifreerow 18 -2 [
			 ]  1 -2 [ guibutton "^f6restore defaults (clears ALL settings)" [showgui "options_restore"]
	]
]

newgui "options_restore" [
	guistrut 28 1
	guialign 0 [guitext "^f7restore defaults, are you sure?" ]
	guialign 0 [guitext "^f6(clears ALL settings)" ]
	guistrut 1
	guialign 0 [
		guibutton "^f2restore" [exec "restore.cfg"; cleargui]
		guistrut 5
		guibutton "^f7cancel" [cleargui 1]
	]
] 0


//#############################################################################################################################################
//#############################################################################################################################################
nodebug [
	defvarp fullconscroll 0 0 1
]

OPT_TAB_Console = [
	guifreerow 15  1 [ guitext "text size: "
			 ]  1 -2 [ guifield conscale 5
			 ]  1 -2 [ guistayopen [guibutton "" [conscale (+fround $conscale -0.05)]  "val_dec"]
			 ]  1 -2 [ guistayopen [guibutton "" [conscale (+fround $conscale  0.05)]  "val_inc"]
	]
	guibar //==================================================================================
	guifreerow 15  1 [ guitext "console size: "
			 ] 40 -2 [ guislider consize
			 ]  1 -2 [ guitext " ^f9(# of lines)"
	]
	guistrut 0.25
	guifreerow 15  1 [ guitext "console filter: "
			 ] 16 -2 [ guibitfield "important info"   confilter 0x11
			 ] 16 -2 [ guibitfield "chat"             confilter 0x100
			 ] 16 -2 [ guibitfield "self frags"       confilter 0x800
	]
	guifreerow 15 -2 [
			 ] 16 -2 [ guibitfield "warnings"         confilter 0x02
			 ] 16 -2 [ guibitfield "team chat"        confilter 0x200
			 ] 16 -2 [ guibitfield "other frags"      confilter 0x1000
	]
	guifreerow 15 -2 [
			 ] 16 -2 [ guibitfield "errors"           confilter 0x04
			 ] 16 -2 [ guibitfield "game events"      confilter 0x400
			 ] 16 -2 [ guibitfield "script messages"  confilter 0x20
	]
	guibar //==================================================================================
	guifreerow 15  1 [ guitext "miniconsole size: "
			 ] 40 -2 [ guislider miniconsize
			 ]  1 -2 [ guitext " ^f9(# of lines)"
	]
	guistrut 0.25
	guifreerow 15  1 [ guitext "miniconsole filter: "
			 ] 16 -2 [ guibitfield "important info"   miniconfilter 0x11
			 ] 16 -2 [ guibitfield "chat"             miniconfilter 0x100
			 ] 16 -2 [ guibitfield "self frags"       miniconfilter 0x800
	]
	guifreerow 15 -2 [
			 ] 16 -2 [ guibitfield "warnings"         miniconfilter 0x02
			 ] 16 -2 [ guibitfield "team chat"        miniconfilter 0x200
			 ] 16 -2 [ guibitfield "other frags"      miniconfilter 0x1000
	]
	guifreerow 15 -2 [
			 ] 16 -2 [ guibitfield "errors"           miniconfilter 0x04
			 ] 16 -2 [ guibitfield "game events"      miniconfilter 0x400
			 ] 16 -2 [ guibitfield "script messages"  miniconfilter 0x20
	]
	guibar //==================================================================================
	guifreerow 15  1 [ guitext "fullconsole size: "
			 ] 40 -2 [ guislider fullconsize
			 ]  1 -2 [ guitext " ^f9(% of scrn)"
	]
	guistrut 0.25
	guifreerow 15  1 [ guitext "fullconsole filter: "
			 ] 16 -2 [ guibitfield "important info"   fullconfilter 0x11
			 ] 16 -2 [ guibitfield "chat"             fullconfilter 0x100
			 ] 16 -2 [ guibitfield "self frags"       fullconfilter 0x800
	]
	guifreerow 15 -2 [
			 ] 16 -2 [ guibitfield "warnings"         fullconfilter 0x02
			 ] 16 -2 [ guibitfield "team chat"        fullconfilter 0x200
			 ] 16 -2 [ guibitfield "other frags"      fullconfilter 0x1000
	]
	guifreerow 15 -2 [
			 ] 16 -2 [ guibitfield "errors"           fullconfilter 0x04
			 ] 16 -2 [ guibitfield "game events"      fullconfilter 0x400
			 ] 16 -2 [ guibitfield "script messages"  fullconfilter 0x20
	]
	guistrut 0.25
	guifreerow 15 -2 [
			 ] 24 -2 [ guicheckbox "scroll with mousewheel" fullconscroll
			 ]  1 -2 [ guicheckbox "toggle full console ^f2[F11]" fullconsole
	]
]


//#############################################################################################################################################
//#############################################################################################################################################
nodebug [
	defvar OPT_VerticalSync 0 0 2
]
//  Multiples of common monitor refresh rates:
//TheHertz_60 = [ 60 120 240 360 480 600 720 840 960 ]
//TheHertz_75 = [ 75 150 225 300 450 600 900 ]
//TheHertz_90 = [ 90 180 270 360 540 720 900 ]
//TheHertz144 = [    144 288 432 576 720 864 ]
//TheHertz165 = [    165 330 495 660 825 990 ]
OPT_TAB_Display = [
	guifreerow 18  1 [ guitext "field of view: "
			 ] 36 -2 [ guislider fov;
			 ] 12  0 [ guitext "^f9(default 100)"
	]
	guibar
	guifreerow 18  1 [ guitext "maxfps: "
			 ] 36 -2 [ guilistslider maxfps [60 75 90 120 144 165 240 360 480 600 720 840 960]
			 ] 12  1 [ guifield maxfps 10
	]
	guistrut 0.25
	guifreerow 18  1 [ guitext "fullscreen: "
			 ]  8 -1 [ guiradio "off"        fullscreen 0
			 ] 11 -1 [ guiradio "desktop"    fullscreen 2
			 ]  1 -1 [ guiradio "fullscreen" fullscreen 1
	]
	guistrut 0.125
	//  Adaptive vsync dynamically disables vsync if framerate drops below sync-rate (screen refresh-rate).
	//  For more info:
	//      https://wiki.libsdl.org/SDL2/SDL_GL_SetSwapInterval
	//      https://www.khronos.org/opengl/wiki/Swap_Interval#Adaptive_Vsync
	cond [&& [= $vsync 0] [= $vsynctear 0]][OPT_VerticalSync 0
	]    [&& [= $vsync 1] [= $vsynctear 0]][OPT_VerticalSync 1
	]    [&& [= $vsync 1] [= $vsynctear 1]][OPT_VerticalSync 2]
	guifreerow 18  1 [ guitext "v-sync: "
			 ]  8 -1 [ guiradio "off"      OPT_VerticalSync 0 [vsync 0; vsynctear 0]
			 ] 11 -1 [ guiradio "on"       OPT_VerticalSync 1 [vsync 1; vsynctear 0]
			 ]  1 -1 [ guiradio "adaptive" OPT_VerticalSync 2 [vsync 1; vsynctear 1]
	]
	guistrut 0.25
	guifreerow 18  1 [ guitext "gamma: "
			 ] 36 -2 [ guislider gamma
			 ] 12  0 [ guitext "^f9(default 100)"
	]
	guifreerow 18  1 [ guitext "z-buffer depth: "
			 ] 36 -2 [ guinameslider depthbits ["auto" "16bit" "24bit" "32bit"] [0 16 24 32]
	]
	guibar
	guifreerow 18 -1 [
			 ] 36 -1 [ guicheckbox "bilinear^t^f9(texture smoothing)"  bilinear
	]
	guifreerow 18 -1 [
			 ] 36 -1 [ guicheckbox "bilinear^t^f9(texture smoothing, map geo only)"  reducefilter
	]
	guifreerow 18 -1 [
			 ] 36 -1 [ guicheckbox "trilinear^t^f9(mipmap-level blending)"  trilinear
	]
	guistrut 0.25
	guifreerow 18  1 [ guitext "mipmap anisotropy: "
			 ] 36 -2 [ guinameslider aniso ["off" "2x" "4x" "8x" "16x"] [0 2 4 8 16]
	]
	guifreerow 18  1 [ guitext "anti-aliasing: "
			 ] 36 -2 [ guinameslider fsaa ["ignore" "off" "2x" "4x" "8x" "16x"] [-1 0 2 4 8 16]
	]
]


//#############################################################################################################################################
//#############################################################################################################################################
nodebug [
	defvar  GfxPreset_Decals           0 0 9
	defvar  GfxPreset_DynamicShadows   0 0 9
	defvar  GfxPreset_Glare            0 0 9
	defvar  GfxPreset_Grass            0 0 9
	defvar  GfxPreset_MotionBlur       0 0 9
	defvar  GfxPreset_ShadowmapQuality 0 0 9
	defvar  GfxPreset_SoftParticles    0 0 9

	defvar  GfxShowTexReduce 0 0 1
]

OPT_TAB_Gfx = [
	guifreerow 17.75  1 [ guitext "^f7*performance key*: "
			 ] 48     0 [ guitext "^f0fast^f~, ^f2moderate^f~, ^f6moderate-ish^f~, ^f3slow & pretty^f~"
	]
	guistrut 0.5
	guifreerow 17.75  1 [ guitext "shader detail: "
			 ] 10    -2 [ guiradio "^f0low"    shaderdetail 0
			 ] 10    -2 [ guiradio "^f2medium" shaderdetail 1
			 ] 10    -2 [ guiradio "^f6high"   shaderdetail 2
			 ]  1    -2 [ guiradio "^f3ultra"  shaderdetail 3
	]
	guistrut 0.5
	GfxPreset_Glare 0
	if (= $glare 1) [
		case $glarescale 1 [
			case $blurglare 4 [GfxPreset_Glare 1] 7 [GfxPreset_Glare 3]
		] 2 [
			case $blurglare 3 [GfxPreset_Glare 2] 7 [GfxPreset_Glare 4]
		]
	]
	guifreerow 17.75  1 [ guitext "glare: "
			 ] 10    -2 [ guiradio "^f~off"     GfxPreset_Glare 0 [glare 0]
			 ] 10    -2 [ guiradio "^f2subtle"  GfxPreset_Glare 1 [glare 1; blurglare 4; glarescale 1]
			 ] 10    -2 [ guiradio "^f2glowy"   GfxPreset_Glare 2 [glare 1; blurglare 3; glarescale 2]
			 ]  8.6  -2 [ guiradio "^f3soft"    GfxPreset_Glare 3 [glare 1; blurglare 7; glarescale 1]
			 ]  1    -2 [ guiradio "^f3intense" GfxPreset_Glare 4 [glare 1; blurglare 7; glarescale 2]
	]
	cond [=  $motionblur 0]         [GfxPreset_MotionBlur 0
	]    [=f $motionblurscale 0.5 ] [GfxPreset_MotionBlur 1
	]    [=f $motionblurscale 0.65] [GfxPreset_MotionBlur 2
	]    [=f $motionblurscale 0.8 ] [GfxPreset_MotionBlur 3
	][GfxPreset_MotionBlur 0]
	guifreerow 17.75  1 [ guitext "motion blur: "
			 ] 10    -2 [ guiradio "^f~off"      GfxPreset_MotionBlur 0 [motionblur 0]
			 ] 10    -2 [ guiradio "^f3subtle"   GfxPreset_MotionBlur 1 [motionblur 1; motionblurscale 0.5 ]
			 ] 10    -2 [ guiradio "^f3moderate" GfxPreset_MotionBlur 2 [motionblur 1; motionblurscale 0.65]
			 ]  1    -2 [ guiradio "^f3intense"  GfxPreset_MotionBlur 3 [motionblur 1; motionblurscale 0.8 ]
	]
	guistrut 0.5
	guifreerow 17.75  1 [ guitext "dynamic lights: "
			 ] 10    -2 [ guiradio "^f~off"    maxdynlights 0
			 ] 10    -2 [ guiradio "^f0max 3"  maxdynlights 3
			 ] 10    -2 [ guiradio "^f2max 4"  maxdynlights 4
			 ]  1    -2 [ guiradio "^f6max 5"  maxdynlights 5
	]
	guistrut 0.5
	cond     [= $depthfx 0]                         [GfxPreset_SoftParticles 0
	]    [&& [= $depthfxsize  7][= $blurdepthfx 1]] [GfxPreset_SoftParticles 1
	]    [&& [= $depthfxsize 10][= $blurdepthfx 0]] [GfxPreset_SoftParticles 2
	]    [&& [= $depthfxsize 12][= $blurdepthfx 0]] [GfxPreset_SoftParticles 3
	][GfxPreset_SoftParticles 0]
	guifreerow 17.75  1 [ guitext "soft particles: "
			 ] 10    -2 [ guiradio "^f~off"    GfxPreset_SoftParticles 0 [depthfx 0]
			 ] 10    -2 [ guiradio "^f0low"    GfxPreset_SoftParticles 1 [depthfx 1; depthfxsize  7; blurdepthfx 1]
			 ] 10    -2 [ guiradio "^f2medium" GfxPreset_SoftParticles 2 [depthfx 1; depthfxsize 10; blurdepthfx 0]
			 ]  1    -2 [ guiradio "^f3high"   GfxPreset_SoftParticles 3 [depthfx 1; depthfxsize 12; blurdepthfx 0]
	]
	guifreerow 17.75  1 [ guitext "max particles: "
			 ] 48    -2 [ guilistslider maxparticles [10 100 500 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000 12500 15000 17500 30000 32500 35000 37500 40000]
	]
	guifreerow 17.75  1 [ guitext "particle distance: "
			 ] 48    -2 [ guilistslider maxparticledistance [256 512 768 1024 1280 1536 1792 2048 2304 2560 2816 3072 3328 3584 3840 4096]
	]
	guistrut 0.5
	cond [&& [= $blobs 1] [= $shadowmap 0]] [GfxPreset_DynamicShadows 1
	]                     [= $shadowmap 1]  [GfxPreset_DynamicShadows 2
	][GfxPreset_DynamicShadows 0]
	guifreerow 17.75  1 [ guitext "dynamic shadows: "
			 ] 10    -2 [ guiradio "^f~off"         GfxPreset_DynamicShadows 0 [blobs 0; shadowmap 0]
			 ] 10    -2 [ guiradio "^f2blobs"       GfxPreset_DynamicShadows 1 [blobs 1; shadowmap 0]
			 ]  1    -2 [ guiradio "^f3shadowmaps"  GfxPreset_DynamicShadows 2 [blobs 0; shadowmap 1]
	]
	GfxPreset_ShadowmapQuality 0
	if (&& [= $blurshadowmap 0][= $shadowmapsize 9]) [GfxPreset_ShadowmapQuality 1][
		case $shadowmapsize 9 [GfxPreset_ShadowmapQuality 2
		]                  10 [GfxPreset_ShadowmapQuality 3
		]                  11 [GfxPreset_ShadowmapQuality 4
		]
	]
	if (= $shadowmap 1) [
		guifreerow 17.75  1 [ guitext "shadowmap quality: "
				 ] 10    -2 [ guiradio "^f2low"    GfxPreset_ShadowmapQuality 1 [shadowmapsize  9; blurshadowmap 0]
				 ] 10    -2 [ guiradio "^f2medium" GfxPreset_ShadowmapQuality 2 [shadowmapsize  9; blurshadowmap 1]
				 ] 10    -2 [ guiradio "^f6high"   GfxPreset_ShadowmapQuality 3 [shadowmapsize 10; blurshadowmap 1]
				 ]  1    -2 [ guiradio "^f3ultra"  GfxPreset_ShadowmapQuality 4 [shadowmapsize 11; blurshadowmap 1]
		]
	][
		guifreerow 17.75  1 [ guitext "shadowmap quality: "
				 ] 10    -2 [ guiradio "^f4low"    GfxPreset_ShadowmapQuality 1 [shadowmapsize  9; blurshadowmap 0]
				 ] 10    -2 [ guiradio "^f4medium" GfxPreset_ShadowmapQuality 2 [shadowmapsize  9; blurshadowmap 1]
				 ] 10    -2 [ guiradio "^f4high"   GfxPreset_ShadowmapQuality 3 [shadowmapsize 10; blurshadowmap 1]
				 ]  1    -2 [ guiradio "^f4ultra"  GfxPreset_ShadowmapQuality 4 [shadowmapsize 11; blurshadowmap 1]
		]
	]
	guistrut 0.5
	guifreerow 17.75  1 [ guitext "models: "
			 ] 10    -2 [ guicheckbox "^f0reflectenv"  envmapmodels
			 ]  1    -2 [ guicheckbox "^f2bumpmap"     bumpmodels
	]
	guistrut 0.5
	if (= $GfxShowTexReduce 0) [
		guifreerow 17.75  1 [ guistayopen [guibutton "max texture size: " [GfxShowTexReduce 1] 0 ]
				 ] 10    -2 [ guiradio "^f0256"        maxtexsize  256
				 ] 10    -2 [ guiradio "^f0512"        maxtexsize  512
				 ] 10    -2 [ guiradio "^f21024"       maxtexsize 1024
				 ]  8.6  -2 [ guiradio "^f62048"       maxtexsize 2048
				 ]  1    -2 [ guiradio "^f6unlimited"  maxtexsize    0
		]
	][
		guifreerow 17.75  1 [ guistayopen [guibutton "reduce texture size: " [GfxShowTexReduce 0] 0 ] // Secret texture option. :o
				 ] 48    -2 [ guinameslider texreduce ["0" "1/2" "1/4" "1/8" "1/16" "1/32" "1/64" "1/128" "1/256" "1/512" "1/1024" "1/2048" "1/4096"] [0 1 2 3 4 5 6 7 8 9 10 11 12] []
		]
	]
	GfxPreset_Grass 0
	if (= $grass 0)         [GfxPreset_Grass 0][
		case $grassdist 128 [GfxPreset_Grass 1
		]               256 [GfxPreset_Grass 2
		]               512 [GfxPreset_Grass 3
		]
	]
	guifreerow 17.75  1 [ guitext "grass: "
			 ] 10    -2 [ guiradio "^f~off"    GfxPreset_Grass 0 [grass 0]
			 ] 10    -2 [ guiradio "^f2low"    GfxPreset_Grass 1 [grass 1; grassdist 128]
			 ] 10    -2 [ guiradio "^f6medium" GfxPreset_Grass 2 [grass 1; grassdist 256]
			 ]  1    -2 [ guiradio "^f3high"   GfxPreset_Grass 3 [grass 1; grassdist 512]
	]
	GfxPreset_Decals 0
	cond     [= $decals 0]                               [GfxPreset_Decals 0
	]    [&& [= $decalfade 10000][= $maxdecaltris 1024]] [GfxPreset_Decals 1
	]    [&& [= $decalfade 30000][= $maxdecaltris 2048]] [GfxPreset_Decals 2
	]    [&& [= $decalfade 60000][= $maxdecaltris 4096]] [GfxPreset_Decals 3
	][GfxPreset_Decals 0]
	guifreerow 17.75  1 [ guitext "decals: "
			 ] 10    -2 [ guiradio "^f~off"    GfxPreset_Decals 0 [decals 0]
			 ] 10    -2 [ guiradio "^f0low"    GfxPreset_Decals 1 [decals 1; decalfade 10000; maxdecaltris 1024]
			 ] 10    -2 [ guiradio "^f2medium" GfxPreset_Decals 2 [decals 1; decalfade 30000; maxdecaltris 2048]
			 ]  1    -2 [ guiradio "^f6high"   GfxPreset_Decals 3 [decals 1; decalfade 60000; maxdecaltris 4096]
	]
	guistrut 0.5
	guifreerow 17.75  1 [ guitext "glass: "
			 ] 10    -2 [ guicheckbox "^f0reflectenv"  glassenv
	]
	guifreerow 17.75  1 [ guitext "water: "
			 ] 10    -2 [ guicheckbox "^f0reflectenv"  waterenvmap
			 ] 10    -2 [ guicheckbox "^f3reflection"  waterreflect
			 ] 10    -2 [ guicheckbox "^f2refraction"  waterrefract
			 ]  8.6  -2 [ guicheckbox "^f0caustics"    caustics
			 ]  1    -2 [ guicheckbox "^f2animation"   vertwater
	]
	guifreerow 17.75  1 [ guitext "waterfalls: "
			 ] 10    -2 [ guicheckbox "^f0reflectenv"  waterfallenv
			 ] 10    -2 [
			 ]  1    -2 [ guicheckbox "^f2refraction"  waterfallrefract
	]
]


//#############################################################################################################################################
//#############################################################################################################################################
OPT_TAB_Hud = [
	guifreerow 17 -2 [
			 ] 12 -2 [ guibutton "adjust hud^t^f2/adjusthud"    adjusthud   "menu"
	]
	guibar
	guifreerow 17  1 [ guitext "show/hide: "
			 ] 12 -2 [ guicheckbox "gameclock"  gameclock
					   guicheckbox "hudscore"  hudscore
	]
	guistrut 0.5
	guifreerow 17 -2 [
			 ] 12 -2 [ guicheckbox "wallclock"  wallclock
			 ] 12 -2 [ guicheckbox (concatword (? $wallclock "" "^f4") "24 hour") wallclock24
			 ] 12 -2 [ guicheckbox (concatword (? $wallclock "" "^f4") "seconds") wallclocksecs
	]
	guistrut 0.5
	guifreerow 17 -2 [
			 ] 12 -2 [ guicheckbox "fps"  showfps
			 ] 12 -2 [ guicheckbox (concatword (? $showfps "" "^f4") "range") showfpsrange
	]
	guistrut 0.5
	guifreerow 17 -2 [
			 ] 24 -2 [ guicheckbox "player status bars" statusbars     // Show health status bars for teammates.
			 ] 24 -2 [ guicheckbox "player status icons" statusicons   // Show status icons over players.
	]
	guibar
	guifreerow 17  1 [ guitext "damage indication: "
			 ] 24 -2 [ guicheckbox "compass"        damagecompass
			 ]  1 -2 [ guicheckbox "screen effect"  damagescreen
	]
	guibar
	guifreerow 17  1 [ guitext "radar: "
			 ] 24 -2 [ guicheckbox "numbered capture bases"  basenumbers
			 ]  1 -2 [ guicheckbox "show teammates"          radarteammates 1
	]
	guibar
	guifreerow 17  1 [ guitext "capture bases: "
			 ] 24 -2 [ guicheckbox "outline meters"  outlinemeters
			 ]  1 -2 [ guicheckbox "tether effect"   capturetether
	]
]


//#############################################################################################################################################
//#############################################################################################################################################
nodebug [
	deffvar AimSens 0.001 1.0 1000.0
]

BindActions = [
	"forward" "backward" "left" "right" "jump" "attack" "togglezoom"
	"saycommand" "sayteamcommand" "showscores" "toggleconsole" "screenshot" "edittoggle"
	"setweapon FI" "setweapon SG" "setweapon CG" "setweapon RL" "setweapon RI" "setweapon GL" "setweapon PI" "weapon"
	"do_delta  1" "do_delta -1" "dropflag" "addbot" "delbot"
]

OPT_TAB_Input = [
	guistayopen [
		MouseAimSens = $sensitivity
		guifreerow 21    -2 [ guitext "mouse-aim sensitivity:"
				 ]  6.5  -2 [ guifield MouseAimSens 5 [sensitivity $MouseAimSens]
				 ]  2    -2 [ guibutton "" [sensitivity (+fround $sensitivity -0.1)]  "val_dec"
				 ]  4.35 -2 [ guibutton "" [sensitivity (+fround $sensitivity  0.1)]  "val_inc"
				 ]  1    -2 [ guicheckbox "mouse-aim invert Y-axis"  invmouse
		]
	]
	guistrut 0.6
	guititle "select action to bind and press desired keys (ESC when done)"
	guistrut 0.4
	iBind = 0
	guilistsplit n 2 $BindActions [
		guistrut 32 1
		guilist [
			guitext (tabify (concatword $n ": ") 4)
			[NewBinds@iBind] = (searchbinds $n)
			guikeyfield [NewBinds@iBind] -12 [
				OldBinds = (searchbinds [@@n])
				looplist iOld  $OldBinds         [bind $iOld ""]
				looplist iNew $[NewBinds@@iBind] [bind $iNew [@@@n]]
			]
			iBind = (+ $iBind 1)
		]
	] [guibar]
]


//#############################################################################################################################################
//#############################################################################################################################################
OPT_TAB_Menus = [
	guistayopen [
		guifreerow 18  1 [ guitext "general: "
				 ] 16 -2 [ guitext "autotab thresh:"
				 ] 32 -2 [ guislider guiautotab
		]
		guifreerow 18 -2 [ 
				 ] 16 -2 [ guitext "cursor size: "
				 ] 32 -2 [ guislider cursorsize 4 50
		]
		guifreerow 18 -2 [
				 ] 16 -2 [ guitext "menufps: "
				 ] 32 -2 [ guilistslider menufps [60 75 90 120 144 165 240 360 480 600]
		]
		guifreerow 18 -2 [
				 ] 16 -2 [ guicheckbox "click tab"  guiclicktab
		]
		guifreerow 18 -2 [
				 ] 16 -2 [ guicheckbox "transition zoom"  guifadein
		]
		guibar
		guifreerow 18  1 [ guitext "mapmodel browser: "
				 ] 16 -2 [ guicheckbox "show model name on hover"  mmguiname
		]
		guifreerow 18  1 [
				 ] 16 -2 [ guitext "width:"
				 ] 32 -2 [ guislider mmguiwidth 4 12
		]
		guifreerow 18  1 [
				 ] 16 -2 [ guitext "height:"
				 ] 32 -2 [ guislider mmguiheight 4 12
		]
		guistrut 0.5
		guifreerow 18  1 [ guitext "texture browser: "
				 ] 16 -2 [ guicheckbox "show texture name on hover"  texguiname
		]
		guifreerow 18 -2 [
				 ] 16 -2 [ guitext "width:"
				 ] 32 -2 [ guislider texguiwidth 4 24
		]
		guifreerow 18 -2 [
				 ] 16 -2 [ guitext "height:"
				 ] 32 -2 [ guislider texguiheight 4 24
		]
		guifreerow 18 -2 [
				 ] 16 -2 [ guitext "scale:"
				 ]  1 -2 [ guifield texguiscale 5
				 ]  1 -2 [ guibutton "" [texguiscale (+fround $texguiscale -0.1)]  "val_dec"
				 ]  1 -2 [ guibutton "" [texguiscale (+fround $texguiscale  0.1)]  "val_inc"
		]
		guibar
		guifreerow 18  1 [ guitext "mainmenu show/hide: "
				 ] 16 -2 [ guicheckbox "botmatch"          mainmenu_showbotmatch
						   guistrut 0.5
						   guicheckbox "loadmap"           mainmenu_showloadmap
						   guicheckbox "loadcustommap"     mainmenu_showloadcustommap
				 ] 17 -2 [ guicheckbox "lanconnect"        mainmenu_showlanconnect
						   guicheckbox "connect localhost" mainmenu_showconnectlocal
						   guistrut 0.5
						   guicheckbox "newmap"            mainmenu_shownewmap
				 ]  1 -2 [ guicheckbox "getdemo"           mainmenu_showgetdemo
						   guicheckbox "loaddemo"          mainmenu_showloaddemo
		]
	]
]


//#############################################################################################################################################
//#############################################################################################################################################
macro guiresbutton [ guibutton "%1x%2" "screenres %1 %2" (if (&& (= $scr_w %1) (= $scr_h %2)) [result "radio_on"] [result "radio_off"]) ]

OPT_TAB_Res = [
	guistayopen [
		guilist [
			guilist [guistrut 16] //  Force Height.
			guilist [
				guistrut 11.6 1
				guititle "4:3"
				@@@@(guiresbutton  320  240)
				@@@@(guiresbutton  640  480)
				@@@@(guiresbutton  800  600)
				@@@@(guiresbutton 1024  768)
				@@@@(guiresbutton 1152  864)
				@@@@(guiresbutton 1280  960)
				@@@@(guiresbutton 1400 1050)
				@@@@(guiresbutton 1600 1200)
				@@@@(guiresbutton 1792 1344)
				@@@@(guiresbutton 1856 1392)
				@@@@(guiresbutton 1920 1440)
				@@@@(guiresbutton 2048 1536)
				@@@@(guiresbutton 2800 2100)
				@@@@(guiresbutton 3200 2400)
				guistrut 1
				guititle "3:2"
				@@@@(guiresbutton 2160 1440)
				@@@@(guiresbutton 2880 1920)
				@@@@(guiresbutton 3000 2000)
				@@@@(guiresbutton 4200 2800)
			]
			guibar
			guilist [
				guistrut 11.6 1
				guititle "16:10"
				@@@@(guiresbutton  320  200)
				@@@@(guiresbutton  640  400)
				@@@@(guiresbutton 1024  640)
				@@@@(guiresbutton 1280  800)
				@@@@(guiresbutton 1440  900)
				@@@@(guiresbutton 1600 1000)
				@@@@(guiresbutton 1680 1050)
				@@@@(guiresbutton 1920 1200)
				@@@@(guiresbutton 2048 1280)
				@@@@(guiresbutton 2560 1600)
				@@@@(guiresbutton 2880 1800)
				@@@@(guiresbutton 3200 2000)
				@@@@(guiresbutton 3840 2400)
			]
			guibar
			guilist [
				guistrut 11.6 1
				guititle "16:9"
				@@@@(guiresbutton  1024  600)
				@@@@(guiresbutton  1280  720)
				@@@@(guiresbutton  1366  768)
				@@@@(guiresbutton  1600  900)
				@@@@(guiresbutton  1920 1080)
				@@@@(guiresbutton  2048 1152)
				@@@@(guiresbutton  2560 1440)
				@@@@(guiresbutton  2880 1620)
				@@@@(guiresbutton  3200 1800)
				@@@@(guiresbutton  3840 2160)
				@@@@(guiresbutton  4096 2304)
				@@@@(guiresbutton  5120 2880)
				@@@@(guiresbutton  7680 4320)
				//@@@@(guiresbutton  8192 4608)
				//@@@@(guiresbutton 15360 8640)
			]
			guibar
			guilist [
				guistrut 11.6 1
				guititle "21:9"
				@@@@(guiresbutton 2560 1080)
				@@@@(guiresbutton 3440 1440)
				@@@@(guiresbutton 3840 1600)
				guistrut 1
				guititle "32:9"
				@@@@(guiresbutton 3840 1080)
				@@@@(guiresbutton 5120 1440)
				guistrut 1
				guititle "1:1"
				@@@@(guiresbutton  512  512)
				@@@@(guiresbutton  768  768)
				@@@@(guiresbutton 1024 1024)
				@@@@(guiresbutton 1920 1920)
				@@@@(guiresbutton 2048 2048)
			]
			guibar
			guilist [
				guistrut 11.6 1
				guititle "5:4"
				@@@@(guiresbutton  600  480)
				@@@@(guiresbutton 1280 1024)
				@@@@(guiresbutton 1600 1280)
				@@@@(guiresbutton 2560 2048)
				guistrut 1
				guititle "5:3"
				@@@@(guiresbutton  800 480)
				@@@@(guiresbutton 1280 768)
				guistrut 3
				guibar
				guititle "custom"
				guistrut 0.25
				guialign 0 [
					CustomResX = $scr_w
					CustomResY = $scr_h
					guifield CustomResX 4 //[scr_w $CustomResX]
					guistrut 1
					guifield CustomResY 4 //[scr_h $CustomResY]
				]
				guistrut 0.25
				guialign 0 [ guibutton "apply" [screenres $CustomResX $CustomResY] ] //(? (&& (= $scr_w $CustomResX) (= $scr_h $CustomResY)) "radio_on" "radio_off")
				guistrut 1.75
				guialign 0 [guicheckbox "fullscreen"  fullscreen]
			]
		]
	]
]


//#############################################################################################################################################
//#############################################################################################################################################
OPT_TAB_Sound = [
	guifreerow 20  1 [ guitext "sound volume: "
			 ] 46 -2 [ guislider soundvol
	]
	guistrut 0.5
	guifreerow 20  1 [ guitext "simultaneous sounds: "  // "max voices"
			 ] 46 -2 [ guislider soundchans
	]
	guistrut 0.25
	guifreerow 20  1 [ guitext "sound frequency: "
			 ] 46 -2 [ guilistslider soundfreq [11025 22050 44100 48000]
	]
	guistrut 0.25
	guifreerow 20  1 [ guitext "sound buffer length: "
			 ] 46 -2 [ guislider soundbufferlen
	]
	guistrut 0.25
	guifreerow 20  1 [
			 ] 46 -2 [ guicheckbox "play sound while minimized" minimizedsounds
	]
	guibar
	guifreerow 20  1 [ guitext "music volume: "
			 ] 46 -2 [ guislider musicvol //[if $musicvol [if (! $music) [playsong]] [music ""]]
	]
	guistrut 0.5
	guifreerow 20  1 [
			 ] 23 -2 [ guicheckbox "show nowplaying" playsong_shownowplaying
			 ] 23 -2 [ if (> $musicvol 0) [guistayopen [guibutton "play next song" playsong]]
	]
	guibar
	guifreerow 20 -2 [
			 ] 46 -2 [ guicheckbox "mumble positional audio" mumble
	]
]

OPT_TAB_Ext = [
	guitab    "Add-ons"
	guitext   "Internal extensions:"
	if $ext_steam [
		guibutton "Steam" [showgui "steam"]
	]
	if $ext_discord [
		guibutton "Discord" [showgui "discord"]
	]
]

//#############################################################################################################################################
//#############################################################################################################################################
OPT_TAB_Cfg = [
	guitext "autoexec.cfg"
	guistrut 0.25
	guitexteditor "autoexec.cfg" -63 18
]


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
nodebug [
	defvar AH_Width  1 78 0
	defvar AH_Height 1 21 0
]

newgui "adjusthud" [
	guiscale 0.65
	guikeeptab 1
	guinoautotab [guistayopen [
		// Save the frames 'guitabnum' hack:            H                               V
							if (= $guitabnum 1) [ guilist [guistrut $AH_Height 1; guilist [guistrut 70 1; AH_TAB_Misc     ]] ]
		guitab "misc2"    ; if (= $guitabnum 2) [ guilist [guistrut $AH_Height 1; guilist [guistrut 70 1; AH_TAB_Misc2    ]] ]
		guitab "crosshair"; if (= $guitabnum 3) [ guilist [guistrut $AH_Height 1; guilist [guistrut 70 1; AH_TAB_Crosshair]] ]
		guitab "gameclock"; if (= $guitabnum 4) [ guilist [guistrut $AH_Height 1; guilist [guistrut 70 1; AH_TAB_GameClock]] ]
		guitab "hudscore" ; if (= $guitabnum 5) [ guilist [guistrut $AH_Height 1; guilist [guistrut 70 1; AH_TAB_HudScore ]] ]
		guitab "editing"  ; if (= $guitabnum 6) [ guilist [guistrut $AH_Height 1; guilist [guistrut 70 1; AH_TAB_Editing  ]] ]
		guitab "edithud"  ; if (= $guitabnum 7) [ guilist [guistrut $AH_Height 1; guilist [guistrut 70 1; AH_TAB_EditHud  ]] ]
	]]
] "misc" [GenCrosshairList]

newgui "crosshair"       [guiscale 0.9; AH_TAB_Crosshair] "" [GenCrosshairList]
newgui "adjustgameclock" [guiscale 0.6; AH_TAB_GameClock] "adjust gameclock"
newgui "adjusthudscore"  [guiscale 0.6; AH_TAB_HudScore ] "adjust hudscore"


//#############################################################################################################################################
AH_TAB_Misc = [
	guialign 0 [guicheckbox "hidehud" hidehud]
	guibar
	guititle "show/hide"
	guistrut 0.5
	guialign 0 [// H
		guistrut 6
		guilist [// V
			guifreerow 12 -2 [ guicheckbox "wallclock"  wallclock
					 ] 12 -2 [ guicheckbox (concatword (? $wallclock "" "^f4") "24 hour") wallclock24
					 ] 12 -2 [ guicheckbox (concatword (? $wallclock "" "^f4") "seconds") wallclocksecs
			]
			guistrut 0.5
			guifreerow 12 -2 [ guicheckbox "fps"  showfps
					 ] 12 -2 [ guicheckbox (concatword (? $showfps "" "^f4") "range") showfpsrange
			]
			guistrut 0.5
			guicheckbox "health colors" healthcolors
			guistrut 0.5
			guifreerow 24 -2 [ guicheckbox "player status bars" statusbars     // Show health status bars for teammates.
					 ] 24 -2 [ guicheckbox "player status icons" statusicons   // Show status icons over players.
			]
			guistrut 0.5
			guicheckbox "mode info on loading screen" showmodeinfo
		]
	]
	guibar
	guititle "damage indication"
	guistrut 0.5
	guialign 0 [// H
		guistrut 6
		guilist [// V
			guifreerow 24 -2 [ guicheckbox "compass"        damagecompass
					 ] 24 -2 [ guicheckbox "screen effect"  damagescreen
			]
		]
	]
	guibar
	guititle "radar"
	guistrut 0.5
	guialign 0 [// H
		guistrut 6
		guilist [// V
			guifreerow 24 -2 [ guicheckbox "numbered capture bases"  basenumbers
					 ] 24 -2 [ guicheckbox "show teammates"          radarteammates 1
			]
		]
	]
	guibar
	guititle "capture bases"
	guistrut 0.5
	guialign 0 [// H
		guistrut 6
		guilist [// V
			guifreerow 24 -2 [ guicheckbox "outline meters"  outlinemeters
					 ] 24 -2 [ guicheckbox "tether effect"   capturetether
			]
		]
	]
]


//#############################################################################################################################################
nodebug [
	defvar AH_SwayStep    1 0 100 //   1.0, 35.0, 100.0
	defvar AH_SwaySide    0 0 100 //   0.0, 0.04,   1.0
	defvar AH_SwayUp   -100 0 100 //  -1.0, 0.05,   1.0

	defvar AH_ThirdPersonDistance    0 0 500 //   0, 20, 50
	defvar AH_ThirdPersonSide     -250 0 250 // -25,  0, 25
	defvar AH_ThirdPersonUp       -250 0 250 // -25,  0, 25
]

AH_TAB_Misc2 = [
	guititle "hudgun"
	guistrut 0.25
	guilist [// H
		guilist [// V
			guistrut 14 1
			guistrut 4
			guialign 1 [guitext "step: "]
			guialign 1 [guitext "horizontal: "]
			guialign 1 [guitext "vertical: "]
		]
		guilist [// V
			guistrut 56 1
			guicheckbox "show hudgun"  hudgun
			guistrut 0.5
			guilist [
				guicheckbox (concatword (? $hudgun "" "^f4") "muzzleflash") muzzleflash
				guistrut 2
				guicheckbox (concatword (? $hudgun "" "^f4") "muzzlelight") muzzlelight
			]
			guistrut 0.5
			guicheckbox (concatword (? $hudgun "" "^f4") "sway") hudgunsway
			AH_SwayStep $swaystep
			AH_SwaySide (*f $swayside 100)
			AH_SwayUp   (*f $swayup   100)
			guislider AH_SwayStep  1 100 [swaystep $AH_SwayStep]
			guislider AH_SwaySide  0 100 [swayside (*f $AH_SwaySide 0.01)]
			guislider AH_SwayUp -100 100 [swayup   (*f $AH_SwayUp   0.01)]
		]
	]
	guibar
	guititle "zoom"
	guistrut 0.25
	guialign 0 [// H
		guilist [// V
			guistrut 14 1
			guialign 1 [guitext "in time ^f9(ms)^f~: "]
			guialign 1 [guitext "out time ^f9(ms)^f~: "]
		]
		guilist [// V
			guistrut 56 1
			guislider zoominvel  0 500 [zoominvel  (round $zoominvel  5)]
			guislider zoomoutvel 0 500 [zoomoutvel (round $zoomoutvel 5)]
		]
	]
	guibar
	guititle "thirdperson"
	guistrut 0.25
	guilist [// H
		guilist [// V
			guistrut 14 1
			guistrut 1
			guialign 1 [guitext "distance: "]
			guialign 1 [guitext "horizontal: "]
			guialign 1 [guitext "vertical: "]
		]
		guilist [// V
			guistrut 56 1
			guicheckbox "thirdperson^t^f2[9]" thirdperson
			AH_ThirdPersonDistance (*f $thirdpersondistance 10)
			AH_ThirdPersonSide (*f $thirdpersonside 10)
			AH_ThirdPersonUp (*f $thirdpersonup 10)
			guislider AH_ThirdPersonDistance 0 500 [thirdpersondistance (*f $AH_ThirdPersonDistance 0.1)]
			guislider AH_ThirdPersonSide -250 250 [thirdpersonside (*f $AH_ThirdPersonSide 0.1)]
			guislider AH_ThirdPersonUp -250 250 [thirdpersonup (*f $AH_ThirdPersonUp 0.1)]
		]
	]
]

//#############################################################################################################################################
nodebug [
	defvar CH_SetMe   0 0 3
	defvar CH_ShowOld 0 0 1

	CrosshairList = "" //  Alias strings can be much longer.
]

AH_TAB_Crosshair = [
	guistayopen [
		guialign 0 [// H
			guitext "size: "
			guilist [// V
				guistrut 44 1
				guislider crosshairsize
			]
		]
		guistrut 0.25
		guialign 0 [// H
			guicheckbox "effects"  crosshairfx
			guistrut 4
			guicheckbox (concatword (? $crosshairfx "^f7" "^f4") "hits") hitcrosshair 425
			guistrut 4
			guicheckbox (concatword (? $crosshairfx "^f7" "^f4") "teammates") teamcrosshair
			guistrut 4
			guicheckbox (concatword (? $crosshairfx "^f7" "^f4") "health colors") crosshaircolors
		]
		guibar
		guialign 0 [// H
			guilist [// V
				guispring
				guilist [// H
					guilist [// V
						guistrut 1; guiradio "" CH_SetMe 0; guistrut 1
						guibar
						guistrut 1; guiradio "" CH_SetMe 1; guistrut 1
						guibar
						guistrut 1; guiradio "" CH_SetMe 2; guistrut 1
						//guibar
						//guistrut 1; guiradio "" CH_SetMe 3; guistrut 1
					]
					guilist [// V
						guialign 0 [guiimage (getcrosshair 0) [CH_SetMe 0] 1]
						guialign 0 [guibutton (concatword (? (= $CH_SetMe 0) "^f7" "^f9") "normal")   [CH_SetMe 0] 0]
						guibar
						guialign 0 [guiimage (getcrosshair 1) [CH_SetMe 1] 1]
						guialign 0 [guibutton (concatword (? (= $CH_SetMe 1) "^f7" "^f9") "teammate") [CH_SetMe 1] 0]
						guibar
						guialign 0 [guiimage (getcrosshair 2) [CH_SetMe 2] 1]
						guialign 0 [guibutton (concatword (? (= $CH_SetMe 2) "^f7" "^f9") "hit")      [CH_SetMe 2] 0]
						//guibar
						//guialign 0 [guiimage (getcrosshair 3) [CH_SetMe 3] 1]
						//guialign 0 [guibutton (concatword (? (= $CH_SetMe 3) "^f7" "^f9") "unused")   [CH_SetMe 3] 0]
					]
				]
				guispring
				guialign 0 [guicheckbox "show old" CH_ShowOld 1 0 [GenCrosshairList]]
			]
			guibar
			guilist [// V
				local This
				loop iRow (ceil (divf (listlen $CrosshairList) 10)) [
					guilist [// H
						loop iCol 10 [
							This = (at $CrosshairList (+ (* $iRow 10) $iCol))
							if (!=s $This "") [
								guiimage $This [loadcrosshair @This $CH_SetMe] 1
							]
						]
					]
				]
				guititle (concatword $guirolloverimgpath)
			]
		]
	]
]

GenCrosshairList = [
	CrosshairList = ""
	loopfiles File "packages/crosshairs" "png" [
		CrosshairList = (concatword $CrosshairList (escape (concatword "packages/crosshairs/" $File ".png")))
	]
	if $CH_ShowOld [
		loopfiles File "packages/crosshairs/old" "png" [
			CrosshairList = (concatword $CrosshairList (escape (concatword "packages/crosshairs/old/" $File ".png")))
		]
	]
]


//#############################################################################################################################################
nodebug [
	defvar AH_GameClockX     0 0 1000 //  0.0  0.50  1.0
	defvar AH_GameClockY     0 0 1000 //  0.0  0.03  1.0
	defvar AH_GameClockScale 0 0 2000 //  0.5  0.75  2.0

	defvar AH_GameClockR 0 0 255
	defvar AH_GameClockG 0 0 255
	defvar AH_GameClockB 0 0 255

	defvar AH_GameClockLowR 0 0 255
	defvar AH_GameClockLowG 0 0 255
	defvar AH_GameClockLowB 0 0 255
]

AH_TAB_GameClock = [
	guinoautotab [guistayopen [
		guialign 0 [// H
			guicheckbox "show gameclock" gameclock
			guistrut 6
			guibutton "RESET" [AH_GameClock_Reset]
		]
		guibar
		guifreerow 14  1 [ guitext "align: "
				 ]  5 -2 [ guiradio "-1" gameclockalign -1
				 ]  5 -2 [ guiradio "0"  gameclockalign  0
				 ]  5 -2 [ guiradio "1"  gameclockalign  1
		]
		guistrut 0.5
		AH_GameClockX (*f $gameclockx 1000)
		guifreerow 14  1 [ guitext "posX: "
				 ] 56 -2 [ guislider AH_GameClockX 0 1000 [gameclockx (*f $AH_GameClockX 0.001)]
		]
		guistrut 0.25
		AH_GameClockY (*f $gameclocky 1000)
		guifreerow 14  1 [ guitext "posY: "
				 ] 56 -2 [ guislider AH_GameClockY 0 1000 [gameclocky (*f $AH_GameClockY 0.001)]
		]
		guistrut 0.5
		AH_GameClockScale (*f $gameclockscale 100)
		guifreerow 14  1 [ guitext "scale: "
				 ] 56 -2 [ guislider AH_GameClockScale 50 200 [gameclockscale (*f $AH_GameClockScale 0.01)]
		]
		guistrut 1
		guilist [// H
			guilist [// V
				guistrut 14 1
				guialign 1 [guitext "color: "]
				guistrut 1
				guialign 1 [guicolor $gameclockcolor; guistrut 1]
			]
			guilist [// V
				guistrut 56 1
				AH_GameClockR (& (>> $gameclockcolor 16) 0xFF)
				AH_GameClockG (& (>> $gameclockcolor  8) 0xFF)
				AH_GameClockB (&     $gameclockcolor     0xFF)
				guislider AH_GameClockR 0 255 [gameclockcolor $AH_GameClockR $AH_GameClockG $AH_GameClockB]
				guislider AH_GameClockG 0 255 [gameclockcolor $AH_GameClockR $AH_GameClockG $AH_GameClockB]
				guislider AH_GameClockB 0 255 [gameclockcolor $AH_GameClockR $AH_GameClockG $AH_GameClockB]
			]
		]
		guistrut 0.5
		guilist [// H
			guilist [// V
				guistrut 14 1
				guialign 1 [guitext "low color: "]
				guistrut 1
				guialign 1 [guicolor $gameclocklowcolor; guistrut 1]
			]
			guilist [// V
				guistrut 56 1
				AH_GameClockLowR (& (>> $gameclocklowcolor 16) 0xFF)
				AH_GameClockLowG (& (>> $gameclocklowcolor  8) 0xFF)
				AH_GameClockLowB (&     $gameclocklowcolor     0xFF)
				guislider AH_GameClockLowR 0 255 [gameclocklowcolor $AH_GameClockLowR $AH_GameClockLowG $AH_GameClockLowB]
				guislider AH_GameClockLowG 0 255 [gameclocklowcolor $AH_GameClockLowR $AH_GameClockLowG $AH_GameClockLowB]
				guislider AH_GameClockLowB 0 255 [gameclocklowcolor $AH_GameClockLowR $AH_GameClockLowG $AH_GameClockLowB]
			]
		]
		guistrut 0.5
		guifreerow 14  1 [ guitext "alpha: "
				 ] 56 -2 [ guislider gameclockalpha
		]
	]]
]

AH_GameClock_Reset = [
	gameclockalign     0
	gameclockalpha     255
	gameclockcolor     0xFFFFFF
	gameclocklowcolor  0xFFA050
	gameclockscale     1.0
	gameclockx         0.50
	gameclocky         0.03
]


//#############################################################################################################################################
nodebug [
	defvar AH_HudScoreX     0 0 1000 //  0.0  0.50  1.0
	defvar AH_HudScoreY     0 0 1000 //  0.0  0.03  1.0
	defvar AH_HudScoreScale 0 0 2000 //  0.5  0.75  2.0

	defvar AH_HudScoreEnemyR 0 0 255
	defvar AH_HudScoreEnemyG 0 0 255
	defvar AH_HudScoreEnemyB 0 0 255

	defvar AH_HudScorePlayerR 0 0 255
	defvar AH_HudScorePlayerG 0 0 255
	defvar AH_HudScorePlayerB 0 0 255
]

AH_TAB_HudScore = [
	guinoautotab [guistayopen [
		guialign 0 [// H
			guicheckbox "show hudscore" hudscore
			guistrut 6
			guibutton "RESET" [AH_HudScore_Reset]
		]
		guibar
		guifreerow 14  1 [ guitext "align: "
				 ]  5 -2 [ guiradio "-1" hudscorealign -1
				 ]  5 -2 [ guiradio "0"  hudscorealign  0
				 ]  5 -2 [ guiradio "1"  hudscorealign  1
		]
		guistrut 0.5
		AH_HudScoreX (*f $hudscorex 1000)
		guifreerow 14  1 [ guitext "posX: "
				 ] 56 -2 [ guislider AH_HudScoreX 0 1000 [hudscorex (*f $AH_HudScoreX 0.001)]
		]
		guistrut 0.25
		AH_HudScoreY (*f $hudscorey 1000)
		guifreerow 14  1 [ guitext "posY: "
				 ] 56 -2 [ guislider AH_HudScoreY 0 1000 [hudscorey (*f $AH_HudScoreY 0.001)]
		]
		guistrut 0.5
		guifreerow 14  1 [ guitext "separation: "
				 ] 56 -2 [ guislider hudscoresep
		]
		guistrut 0.5
		AH_HudScoreScale (*f $hudscorescale 100)
		guifreerow 14  1 [ guitext "scale: "
				 ] 56 -2 [ guislider AH_HudScoreScale 50 200 [hudscorescale (*f $AH_HudScoreScale 0.01)]
		]
		guistrut 1
		guilist [// H
			guilist [// V
				guistrut 14 1
				guialign 1 [guitext "player color: "]
				guistrut 1
				guialign 1 [guicolor $hudscoreplayercolor; guistrut 1]
			]
			guilist [// V
				guistrut 56 1
				AH_HudScorePlayerR (& (>> $hudscoreplayercolor 16) 0xFF)
				AH_HudScorePlayerG (& (>> $hudscoreplayercolor  8) 0xFF)
				AH_HudScorePlayerB (&     $hudscoreplayercolor     0xFF)
				guislider AH_HudScorePlayerR 0 255 [hudscoreplayercolor $AH_HudScorePlayerR $AH_HudScorePlayerG $AH_HudScorePlayerB]
				guislider AH_HudScorePlayerG 0 255 [hudscoreplayercolor $AH_HudScorePlayerR $AH_HudScorePlayerG $AH_HudScorePlayerB]
				guislider AH_HudScorePlayerB 0 255 [hudscoreplayercolor $AH_HudScorePlayerR $AH_HudScorePlayerG $AH_HudScorePlayerB]
			]
		]
		guistrut 0.5
		guilist [// H
			guilist [// V
				guistrut 14 1
				guialign 1 [guitext "enemy color: "]
				guistrut 1
				guialign 1 [guicolor $hudscoreenemycolor; guistrut 1]
			]
			guilist [// V
				guistrut 56 1
				AH_HudScoreEnemyR (& (>> $hudscoreenemycolor  16) 0xFF)
				AH_HudScoreEnemyG (& (>> $hudscoreenemycolor   8) 0xFF)
				AH_HudScoreEnemyB (&     $hudscoreenemycolor      0xFF)
				guislider AH_HudScoreEnemyR 0 255 [hudscoreenemycolor $AH_HudScoreEnemyR $AH_HudScoreEnemyG $AH_HudScoreEnemyB]
				guislider AH_HudScoreEnemyG 0 255 [hudscoreenemycolor $AH_HudScoreEnemyR $AH_HudScoreEnemyG $AH_HudScoreEnemyB]
				guislider AH_HudScoreEnemyB 0 255 [hudscoreenemycolor $AH_HudScoreEnemyR $AH_HudScoreEnemyG $AH_HudScoreEnemyB]
			]
		]
		guistrut 0.5
		guifreerow 14  1 [ guitext "alpha: "
				 ] 56 -2 [ guislider hudscorealpha
		]
	]]
]

AH_HudScore_Reset = [
	hudscorealign        0
	hudscorealpha        255
	hudscoreenemycolor  0xFF4040
	hudscoreplayercolor 0x60A0FF
	hudscorescale        1.0
	hudscoresep          200
	hudscorex            0.50
	hudscorey            0.03
]


//#############################################################################################################################################
nodebug [
	defvar SkyOutlineR 0 0 255
	defvar SkyOutlineG 0 0 255
	defvar SkyOutlineB 0 0 255
]

AH_TAB_Editing = [
	guititle "misc"
	guistrut 0.25
	guilist [// H
		guilist [// V
			guistrut 14 1
			guistrut 2
			guialign 1 [guitext "sparkly size: "]
		]
		guilist [// V
			guistrut 56 1
			guicheckbox "show editstats while playing" showeditstats
			guicheckbox "show selected entity radius" showentradius
			guislider particlesize //  Size of entity sparklies in editmode.
			guicheckbox "show particles from particle entities in editmode" showparticles
		]
	]
	guibar
	guititle "skytexture"
	guistrut 0.25
	guilist [// H
		guilist [// V
			guistrut 14 1
			guistrut 2
			guialign 1 [guitext "outlinecolor: "]
			guistrut 1
			guialign 1 [guicolor $skyoutlinecolor; guistrut 1]
		]
		guilist [// V
			guistrut 56 1
			guicheckbox "show surface ^f9(with skytexture 0)" showsky
			guicheckbox "show outline" showskyoutline
			SkyOutlineR (& (>> $skyoutlinecolor 16) 0xFF)
			SkyOutlineG (& (>> $skyoutlinecolor  8) 0xFF)
			SkyOutlineB (&     $skyoutlinecolor     0xFF)
			guislider SkyOutlineR 0 255 [skyoutlinecolor $SkyOutlineR $SkyOutlineG $SkyOutlineB]
			guislider SkyOutlineG 0 255 [skyoutlinecolor $SkyOutlineR $SkyOutlineG $SkyOutlineB]
			guislider SkyOutlineB 0 255 [skyoutlinecolor $SkyOutlineR $SkyOutlineG $SkyOutlineB]
		]
	]
	guibar
	guititle "waypoints"
	guistrut 0.25
	guilist [// H
		guilist [// V
			guistrut 14 1
			guistrut 2.5
			guialign 1 [guitext "view distance: "]
		]
		guilist [// V
			guistrut 56 1
			guicheckbox "show  ^f2[-]" showwaypoints
			guicheckbox "drop  ^f2[=]" dropwaypoints
			guistrut 0.5
			guislider showwaypointsradius
		]
	]
]

//#############################################################################################################################################
AH_TAB_EditHud = [
	guifreerow 12 -2 [
			 ] 16 -2 [ guicheckbox "player position"     edithud_showmyposition
					   guicheckbox "player rotation"     edithud_showmyrotation
			 ] 24 -2 [ guicheckbox "texture parameters"  edithud_showtexparams
					   guicheckbox (concatword (? $edithud_showtexparams "" "^f4") "texture layer parameters")  edithud_showtexlayerparams
			 ]  1 -2 [ guicheckbox "selection info"      edithud_showselinfo
					   guicheckbox "texture history"     edithud_showtexhistory
	]
	guistrut 0.5
	guifreerow 12  1 [ if $debugthisparty [guibutton "debugparty: " [debugthisparty 0] 0] [guibutton "debugthis: " [debugthisparty 1] 0]
			 ]  1 -2 [ guifield debugthis -55
	]
	guistrut 0.5
	guifreerow 12  1 [ guitext "listbools: "
			 ]  1 -2 [ guifield edithud_listbools -55
	]
	guifreerow 12  1 [ guitext "shy: "
			 ]  1 -2 [ guifield edithud_listboolsshy -55
	]
	guifreerow 12  1 [ guitext "notice: "
			 ]  1 -2 [ guifield edithud_listboolsnotice -55
	]
	guistrut 0.5
	guifreerow 12  1 [ guitext "listvars: "
			 ]  1 -2 [ guifield edithud_listvars -55
	]
]


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
newgui "postfx" [
	guibutton "(effect OFF)"            [clearpostfx]
	guistrut 0.5
	guibutton "bloom (subtle: 30%)"     [bloom 0.3]
	guibutton "bloom (bright: 55%)"     [bloom 0.55]
	guibutton "bloom (intense: 80%)"    [bloom 0.8]
	guistrut 0.5
	guibutton "rotoscope"               [rotoscope 1]
	guibutton "rotoscope + blur3"       [rotoscope 1 1]
	guibutton "rotoscope + blur5"       [rotoscope 1 2]
	guistrut 0.5
	guibutton "sobel"                   [setpostfx sobel]
	guibutton "toast"                   [setpostfx toast]
	guistrut 0.5
	guibutton "invert"                  [setpostfx invert]
	guibutton "gbr"                     [setpostfx gbr]
	guibutton "bw"                      [setpostfx bw]
	guistrut 0.5
	guibutton "blur3"                   [setpostfx hblur3; addpostfx vblur3]
	guibutton "blur5"                   [setpostfx hblur5; addpostfx vblur5]
]

// extension stuff

newgui "discord" [
	guitext "Nothing here yet, check back later."
] "Discord settings"

newgui "steam" [
	guibutton "Steam Input Configuration" [steaminput_binding]
] "Steam settings"
